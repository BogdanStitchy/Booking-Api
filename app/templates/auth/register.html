{% extends "base.html" %}

{% block head %}
<script>
    async function registerUser() {
        const wrongCredentialsSpan = document.getElementById("wrong_credentials");
        wrongCredentialsSpan.textContent = "";

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const url = 'http://127.0.0.1:8000/auth/register';

        await fetch(url, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({email: email, password: password})
        }).then(response => {
            if (response.status === 200) {
                alert("–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å:")
                window.location.href = "/pages/login"
            } else {
                console.log("ERROR", response.status)
                console.log(response.text())
                wrongCredentialsSpan.textContent = "–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ email";
            }
        });
    }
</script>
{% endblock %}

{% block content %}
<div class="flex flex-col items-center justify-center h-screen">
    <span class="font-bold text-3xl mb-10">üåç –ú–∏—Ä–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</span>

    <div>
        <div class="flex flex-col items-start text-xl mb-5">
            <label for="email" class="mb-1">Email</label>
            <input class="border-b-2 border-yellow-400 mb-4" id="email" name="email" type="text" value=""
                   placeholder="example@gmail.ru">

            <label for="password" class="mb-1">–ü–∞—Ä–æ–ª—å</label>
            <input class="border-b-2 border-yellow-400" id="password" name="password" type="password" value=""
                   placeholder="********">
            <span id="wrong_credentials" class="text-sm text-red-400"></span>
        </div>
    </div>
    <button onclick="registerUser()" class="text-xl bg-yellow-400 px-3 py-2 rounded-3xl mb-3">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
    </button>
    <span>
            –£–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã?
            <a href="/pages/login"
               class="underline text-blue-600 hover:text-blue-800 visited:text-purple-600">
                –í–æ–π—Ç–∏
            </a>
        </span>
</div>
{% endblock %}